@echo off
chcp 65001 > nul
cls
echo.
echo ?????????????????????????????????????????????????????????????????
echo ?         ?? Version 1.5.0 - Release auf GitHub                ?
echo ?????????????????????????????????????????????????????????????????
echo.
echo ?? Ziel: Version 1.5.0 mit Mobile Dashboard veröffentlichen
echo.
echo ????????????????????????????????????????????????????????????????
echo  SCHRITT-FÜR-SCHRITT ANLEITUNG
echo ????????????????????????????????????????????????????????????????
echo.
echo [1] Vorbereitung
echo     ? CHANGELOG.md aktualisiert
echo     ? README.md aktualisiert
echo     ? Version in .csproj auf 1.5.0
echo     ? Build erfolgreich
echo     ? Alle Features getestet
echo.
echo [2] Git Status prüfen
echo.
git status
echo.
echo ????????????????????????????????????????????????????????????????
echo.
echo ? Sehen alle Änderungen korrekt aus? (J/N)
set /p confirm1="   Eingabe: "
if /i not "%confirm1%"=="J" (
    echo.
    echo ? Abgebrochen. Bitte prüfe die Änderungen.
    pause
    exit /b 0
)

echo.
echo [3] Alle Dateien hinzufügen
echo.
git add .
if %errorlevel% neq 0 (
    echo ? Fehler beim Hinzufügen!
    pause
    exit /b 1
)
echo ? Dateien hinzugefügt
echo.

echo [4] Commit erstellen
echo.
git commit -m "Release v1.5.0 - Mobile Dashboard mit SignalR, QR-Code Verbindung und Echtzeit-Updates"
if %errorlevel% neq 0 (
    echo ??  Kein neuer Commit (möglicherweise bereits committed)
)
echo.

echo [5] Git Tag erstellen
echo.
git tag -a v1.5.0 -m "Version 1.5.0 - Mobile Dashboard"
if %errorlevel% neq 0 (
    echo ??  Tag existiert möglicherweise bereits
    echo    Löschen mit: git tag -d v1.5.0
    echo.
    echo ? Existierenden Tag überschreiben? (J/N)
    set /p confirm2="   Eingabe: "
    if /i "%confirm2%"=="J" (
        git tag -d v1.5.0
        git tag -a v1.5.0 -m "Version 1.5.0 - Mobile Dashboard"
    ) else (
        echo ? Abgebrochen
        pause
        exit /b 1
    )
)
echo ? Tag erstellt
echo.

echo [6] Push zu GitHub vorbereiten
echo.
echo    Repository: https://github.com/Elemirus1996/Einsatzueberwachung.Web
echo    Branch: main
echo    Tag: v1.5.0
echo.
echo ? Jetzt zu GitHub pushen? (J/N)
set /p confirm3="   Eingabe: "
if /i not "%confirm3%"=="J" (
    echo.
    echo ??  Push übersprungen
    echo    Manuell pushen mit:
    echo    git push origin main
    echo    git push origin v1.5.0
    pause
    exit /b 0
)

echo.
echo [7] Push Main Branch
echo.
git push origin main
if %errorlevel% neq 0 (
    echo ? Fehler beim Push!
    echo    Möglicherweise gibt es Konflikte
    pause
    exit /b 1
)
echo ? Main Branch gepusht
echo.

echo [8] Push Tag
echo.
git push origin v1.5.0
if %errorlevel% neq 0 (
    echo ? Fehler beim Push des Tags!
    echo    Tag möglicherweise bereits auf GitHub
    echo    Löschen auf GitHub mit:
    echo    git push origin :refs/tags/v1.5.0
    pause
    exit /b 1
)
echo ? Tag gepusht
echo.

echo.
echo ?????????????????????????????????????????????????????????????????
echo ?              ? GIT PUSH ERFOLGREICH!                         ?
echo ?????????????????????????????????????????????????????????????????
echo.
echo ?? Version 1.5.0 ist auf GitHub!
echo.
echo ????????????????????????????????????????????????????????????????
echo  NÄCHSTE SCHRITTE
echo ????????????????????????????????????????????????????????????????
echo.
echo [1] GitHub Release erstellen
echo     1. Öffne: https://github.com/Elemirus1996/Einsatzueberwachung.Web
echo     2. Klicke: "Releases" (rechts)
echo     3. Klicke: "Draft a new release"
echo     4. Choose tag: v1.5.0
echo     5. Release title: Version 1.5.0 - Mobile Dashboard
echo     6. Kopiere Text aus: GITHUB_RELEASE_SUMMARY_V1.5.md
echo     7. Optional: Screenshots hinzufügen
echo     8. Klicke: "Publish release"
echo.
echo [2] Dokumentation prüfen
echo     ? README.md wird korrekt angezeigt
echo     ? MOBILE_README.md ist verlinkt
echo     ? Alle Links funktionieren
echo.
echo [3] Optional: Community informieren
echo     ?? Social Media Post
echo     ?? Nutzer benachrichtigen
echo     ?? Feedback-Kanäle öffnen
echo.
echo ????????????????????????????????????????????????????????????????
echo.
echo ?? Wichtige Dateien für GitHub Release:
echo    - GITHUB_RELEASE_SUMMARY_V1.5.md (für Release-Beschreibung)
echo    - RELEASE_V1.5.md (detaillierte Release Notes)
echo    - MOBILE_QUICK_START.md (Schnellstart-Anleitung)
echo.
echo ?? Repository: https://github.com/Elemirus1996/Einsatzueberwachung.Web
echo ???  Tag: v1.5.0
echo ?? Feature: Mobile Dashboard
echo.

pause
